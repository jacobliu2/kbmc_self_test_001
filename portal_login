<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì½”ë¦¬ì•„ê²½ì˜ìë¬¸ ìê°€ì§„ë‹¨ í¬í„¸</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&family=Noto+Sans+KR:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: #f8f9fc;
            min-height: 100vh;
        }

        .top-line {
            height: 6px;
            background: linear-gradient(90deg, #1e3a5f 0%, #2874a6 100%);
        }

        /* ë¡œê·¸ì¸ í™”ë©´ */
        .login-container {
            max-width: 450px;
            margin: 100px auto;
            padding: 50px 40px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(30, 58, 95, 0.1);
            border: 1px solid rgba(30, 58, 95, 0.06);
        }

        .login-container::before {
            content: '';
            display: block;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, #1e3a5f 0%, #2874a6 100%);
            margin: -50px -40px 40px;
            border-radius: 20px 20px 0 0;
        }

        .login-title {
            font-family: 'Montserrat', 'Noto Sans KR', sans-serif;
            font-size: 28px;
            font-weight: 800;
            color: #1e3a5f;
            text-align: center;
            margin-bottom: 40px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 700;
            color: #1a1a2e;
            margin-bottom: 8px;
        }

        .form-input {
            width: 100%;
            padding: 14px 18px;
            font-size: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-family: 'Noto Sans KR', sans-serif;
        }

        .form-input:focus {
            outline: none;
            border-color: #2874a6;
        }

        .btn-login {
            width: 100%;
            padding: 16px;
            font-size: 16px;
            font-weight: 700;
            background: #1e3a5f;
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .btn-login:hover {
            background: #152a45;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(30, 58, 95, 0.3);
        }

        .error-message {
            color: #d32f2f;
            font-size: 14px;
            margin-top: 10px;
            text-align: center;
            font-weight: 600;
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .main-container {
            display: none;
        }

        .main-container.active {
            display: block;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 50px 40px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 50px;
        }

        .header h1 {
            font-family: 'Montserrat', 'Noto Sans KR', sans-serif;
            font-size: 36px;
            font-weight: 800;
            color: #1e3a5f;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-name {
            font-size: 16px;
            font-weight: 700;
            color: #1a1a2e;
        }

        .btn-logout, .btn-admin {
            padding: 10px 20px;
            font-size: 14px;
            font-weight: 700;
            border: 2px solid #1e3a5f;
            background: white;
            color: #1e3a5f;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-logout:hover, .btn-admin:hover {
            background: #1e3a5f;
            color: white;
        }

        .category-section {
            margin-bottom: 50px;
        }

        .category-title {
            font-family: 'Montserrat', 'Noto Sans KR', sans-serif;
            font-size: 24px;
            font-weight: 800;
            color: #1e3a5f;
            margin-bottom: 20px;
            padding-left: 16px;
            border-left: 5px solid #2874a6;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(450px, 1fr));
            gap: 24px;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 35px;
            box-shadow: 0 2px 12px rgba(30, 58, 95, 0.08);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            border: 1px solid rgba(30, 58, 95, 0.06);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, #1e3a5f 0%, #2874a6 100%);
            border-radius: 20px 20px 0 0;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 32px rgba(30, 58, 95, 0.15);
            border-color: #2874a6;
        }

        .card-category {
            display: inline-block;
            background: #2874a6;
            color: white;
            padding: 7px 16px;
            border-radius: 14px;
            font-size: 13px;
            font-weight: 700;
            margin-bottom: 16px;
        }

        .card-title {
            font-family: 'Montserrat', 'Noto Sans KR', sans-serif;
            font-size: 22px;
            font-weight: 800;
            color: #1a1a2e;
            margin-bottom: 12px;
            line-height: 1.4;
        }

        .card-description {
            font-size: 15px;
            color: #64748b;
            line-height: 1.6;
            margin-bottom: 24px;
            font-weight: 500;
        }

        .card-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn {
            flex: 1;
            min-width: 120px;
            padding: 14px 20px;
            font-size: 15px;
            font-weight: 700;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .btn-primary {
            background: #1e3a5f;
            color: white;
        }

        .btn-primary:hover {
            background: #152a45;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: white;
            color: #1e3a5f;
            border: 2px solid #1e3a5f;
        }

        .btn-secondary:hover {
            background: #1e3a5f;
            color: white;
        }

        .btn-print {
            background: white;
            color: #2874a6;
            border: 2px solid #2874a6;
        }

        .btn-print:hover {
            background: #2874a6;
            color: white;
        }

        /* ê´€ë¦¬ì íŒ¨ë„ */
        .admin-panel {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .admin-panel.active {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .admin-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            z-index: 1001;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        .admin-title {
            font-family: 'Montserrat', 'Noto Sans KR', sans-serif;
            font-size: 24px;
            font-weight: 800;
            color: #1e3a5f;
        }

        .btn-close {
            padding: 10px 24px;
            font-size: 15px;
            font-weight: 700;
            background: #1e3a5f;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-close:hover {
            background: #152a45;
            transform: translateY(-2px);
        }

        .user-list {
            margin-top: 20px;
        }

        .user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .user-item-info {
            font-size: 15px;
            font-weight: 600;
            color: #1a1a2e;
        }

        .user-item-role {
            font-size: 13px;
            color: #64748b;
            margin-left: 10px;
        }

        .btn-delete {
            padding: 8px 16px;
            font-size: 13px;
            font-weight: 700;
            background: #d32f2f;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
        }

        .add-user-form {
            margin-top: 30px;
            padding: 25px;
            background: #f8f9fc;
            border-radius: 15px;
        }

        .add-user-title {
            font-size: 18px;
            font-weight: 800;
            color: #1e3a5f;
            margin-bottom: 20px;
        }

        .footer {
            text-align: center;
            padding: 40px;
            margin-top: 60px;
            border-top: 2px solid rgba(30, 58, 95, 0.1);
        }

        .footer-copyright {
            font-size: 14px;
            color: #64748b;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .login-container {
                margin: 50px 20px;
                padding: 40px 30px;
            }

            .container {
                padding: 30px 24px;
            }

            .header {
                flex-direction: column;
                align-items: flex-start;
                gap: 20px;
            }

            .header h1 {
                font-size: 28px;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }

            .admin-content {
                width: 95%;
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <div class="top-line"></div>

    <!-- ë¡œê·¸ì¸ í™”ë©´ -->
    <div id="loginScreen" class="login-container">
        <h1 class="login-title">ì½”ë¦¬ì•„ê²½ì˜ìë¬¸<br>ìê°€ì§„ë‹¨ í¬í„¸</h1>
        <form id="loginForm">
            <div class="form-group">
                <label class="form-label">ì•„ì´ë””</label>
                <input type="text" id="username" class="form-input" required>
            </div>
            <div class="form-group">
                <label class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" id="password" class="form-input" required>
            </div>
            <button type="submit" class="btn-login">ë¡œê·¸ì¸</button>
            <div id="errorMessage" class="error-message"></div>
        </form>
    </div>

    <!-- ë©”ì¸ í™”ë©´ -->
    <div id="mainScreen" class="main-container">
        <div class="container">
            <div class="header">
                <h1>ì½”ë¦¬ì•„ê²½ì˜ìë¬¸ ìê°€ì§„ë‹¨ í¬í„¸</h1>
                <div class="user-info">
                    <span class="user-name" id="currentUser"></span>
                    <button id="adminBtn" class="btn-admin" style="display:none;">ê´€ë¦¬ì íŒ¨ë„</button>
                    <button id="logoutBtn" class="btn-logout">ë¡œê·¸ì•„ì›ƒ</button>
                </div>
            </div>

            <div id="content"></div>

            <div class="footer">
                <div class="footer-copyright">Â© ì½”ë¦¬ì•„ê²½ì˜ìë¬¸</div>
            </div>
        </div>
    </div>

    <!-- ê´€ë¦¬ì íŒ¨ë„ -->
    <div id="adminPanel" class="admin-panel">
        <div class="admin-content">
            <div class="admin-header">
                <h2 class="admin-title">ì‚¬ìš©ì ê´€ë¦¬</h2>
                <button id="closeAdmin" class="btn-close">ë‹«ê¸°</button>
            </div>

            <div class="user-list" id="userList"></div>

            <div class="add-user-form">
                <h3 class="add-user-title">ìƒˆ ì‚¬ìš©ì ì¶”ê°€</h3>
                <div class="form-group">
                    <label class="form-label">ì•„ì´ë””</label>
                    <input type="text" id="newUserId" class="form-input">
                </div>
                <div class="form-group">
                    <label class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
                    <input type="text" id="newUserPassword" class="form-input">
                </div>
                <button id="addUserBtn" class="btn-login">ì‚¬ìš©ì ì¶”ê°€</button>
            </div>
        </div>
    </div>

    <script>
        // ì´ˆê¸° ì‚¬ìš©ì ë°ì´í„°
        const defaultUsers = [
            { id: "admin", password: "admin1234", role: "admin" },
            { id: "ì¡°ì¹˜ë²”", password: "1234", role: "user" },
            { id: "ê¹€ë²”ê¸°", password: "1234", role: "user" },
            { id: "ì •ì€ë¯¸", password: "1234", role: "user" },
            { id: "ì •í˜œìœ¤", password: "1234", role: "user" },
            { id: "ê°•ì •í™˜", password: "1234", role: "user" },
            { id: "ê¹€ë´‰í•„", password: "1234", role: "user" },
            { id: "ê¹€ì—°í•œ", password: "1234", role: "user" },
            { id: "ê¹€ìš©í¬", password: "1234", role: "user" },
            { id: "ê¹€ì¢…ë¹ˆ", password: "1234", role: "user" },
            { id: "ë°•ë¬¸ìˆ˜", password: "1234", role: "user" },
            { id: "ì„œê°‘ê¸°", password: "1234", role: "user" },
            { id: "ì–‘ì€ëª¨", password: "1234", role: "user" },
            { id: "ì–‘í™˜ê¸°", password: "1234", role: "user" },
            { id: "ìœ ë™ê´€", password: "1234", role: "user" },
            { id: "ìœ ì˜ì¤€", password: "1234", role: "user" },
            { id: "ì„ì„ì¤‘", password: "1234", role: "user" },
            { id: "ì •ìš°ì„±", password: "1234", role: "user" },
            { id: "ì°¨ë§Œí¬", password: "1234", role: "user" },
            { id: "ì¶”ì •í•œ", password: "1234", role: "user" },
            { id: "í˜•ì£¼ì˜", password: "1234", role: "user" },
            { id: "ì •ëª…êµ¬", password: "1234", role: "user" },
            { id: "ê¹€ì² í¬", password: "1234", role: "user" },
            { id: "ë‚¨ìƒë§Œ", password: "1234", role: "user" },
            { id: "ë¬¸ë²”ëª¨", password: "1234", role: "user" },
            { id: "ë¬¸ì„±í¬", password: "1234", role: "user" },
            { id: "ë°•ì„±í›ˆ", password: "1234", role: "user" },
            { id: "ì•ˆëŒ€ìŠ¹", password: "1234", role: "user" },
            { id: "ì¡°ì˜ì˜¤", password: "1234", role: "user" },
            { id: "ì¡°ì¬ì™„", password: "1234", role: "user" },
            { id: "ìµœíšŒìˆ˜", password: "1234", role: "user" },
            { id: "ì‹ ìƒêµ­", password: "1234", role: "user" },
            { id: "ê¹€ê´€í˜•", password: "1234", role: "user" },
            { id: "ê¹€ë‘í•œ", password: "1234", role: "user" },
            { id: "ë°•ìƒí˜", password: "1234", role: "user" },
            { id: "ë°°í•œë‘", password: "1234", role: "user" },
            { id: "ì„œë„ê²¸", password: "1234", role: "user" },
            { id: "ì‹ ì¸ê· ", password: "1234", role: "user" },
            { id: "ìœ ì¸ìˆ˜", password: "1234", role: "user" },
            { id: "ì´ë™í˜", password: "1234", role: "user" },
            { id: "ì´ì€ì •", password: "1234", role: "user" },
            { id: "ì´í˜„ì¤€", password: "1234", role: "user" },
            { id: "ì´í¬ìš©", password: "1234", role: "user" },
            { id: "ìµœì¢…ê¸¸", password: "1234", role: "user" },
            { id: "ê¹€ì¬ê·¼", password: "1234", role: "user" },
            { id: "ë°•ìƒìš±", password: "1234", role: "user" },
            { id: "ë°•ìŠ¹ê·œ", password: "1234", role: "user" },
            { id: "ì–‘ì€í˜„", password: "1234", role: "user" },
            { id: "ì´ì„±ì›", password: "1234", role: "user" },
            { id: "ì „ìš©ì¤€", password: "1234", role: "user" },
            { id: "í™ê¸°ì—´", password: "1234", role: "user" }
        ];

        // í˜„ì¬ ì‚¬ìš©ì
        let currentUser = null;

        // ë¡œê·¸ì¸ ì²˜ë¦¬
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            
            // defaultUsersì—ì„œ ì§ì ‘ ì°¾ê¸°
            const user = defaultUsers.find(u => u.id === username && u.password === password);
            
            if (user) {
                currentUser = user;
                sessionStorage.setItem('currentUser', JSON.stringify(user));
                
                // ì ‘ì† ë¡œê·¸ ì €ì¥
                saveLoginLog(username);
                
                showMainScreen();
            } else {
                document.getElementById('errorMessage').textContent = 'ì•„ì´ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.';
            }
        });

        // ì ‘ì† ë¡œê·¸ ì €ì¥
        function saveLoginLog(userId) {
            try {
                let logs = JSON.parse(localStorage.getItem('loginLogs') || '{}');
                
                if (!logs[userId]) {
                    logs[userId] = {
                        count: 0,
                        lastLogin: null,
                        history: []
                    };
                }
                
                const now = new Date().toISOString();
                logs[userId].count += 1;
                logs[userId].lastLogin = now;
                logs[userId].history.push(now);
                
                // ìµœê·¼ 10ê°œë§Œ ìœ ì§€
                if (logs[userId].history.length > 10) {
                    logs[userId].history = logs[userId].history.slice(-10);
                }
                
                localStorage.setItem('loginLogs', JSON.stringify(logs));
            } catch (e) {
                console.error('ë¡œê·¸ ì €ì¥ ì˜¤ë¥˜:', e);
            }
        }

        // ì ‘ì† ë¡œê·¸ ê°€ì ¸ì˜¤ê¸°
        function getLoginLogs() {
            try {
                return JSON.parse(localStorage.getItem('loginLogs') || '{}');
            } catch (e) {
                return {};
            }
        }

        // ë‚ ì§œ í¬ë§·
        function formatDate(isoString) {
            if (!isoString) return '-';
            const date = new Date(isoString);
            return date.toLocaleString('ko-KR', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit'
            });
        }

        // ë©”ì¸ í™”ë©´ í‘œì‹œ
        function showMainScreen() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('mainScreen').classList.add('active');
            document.getElementById('currentUser').textContent = currentUser.id + 'ë‹˜';
            
            if (currentUser.role === 'admin') {
                document.getElementById('adminBtn').style.display = 'block';
            }
            
            loadContent();
        }

        // ë¡œê·¸ì•„ì›ƒ
        document.getElementById('logoutBtn').addEventListener('click', function() {
            sessionStorage.removeItem('currentUser');
            location.reload();
        });

        // ì½˜í…ì¸  ë¡œë“œ
        function loadContent() {
            const categories = [
                {
                    title: "ì¬ë¬´ë¶„ì„",
                    tests: [
                        { title: "ì¬ë¬´ê±´ì „ì„± ì¢…í•©ì§„ë‹¨", desc: "ê¸°ì—… ì¬ë¬´ìƒíƒœ ì‹¬ì¸µ ë¶„ì„ (2026ë…„ ê¸°ì¤€)", file: "kbmc_finace_final_2026.html" },
                        { title: "ê°„í¸ ì¬ë¬´ì§„ë‹¨", desc: "ì¤‘ì†Œê¸°ì—… ì¬ë¬´ìƒíƒœ ë¹ ë¥¸ ì²´í¬", file: "smessimple_finance.html" }
                    ]
                },
                {
                    title: "ë””ì§€í„¸ì „í™˜",
                    tests: [
                        { title: "í´ë¼ìš°ë“œ ë°”ìš°ì²˜ ìê°€ì§„ë‹¨", desc: "í´ë¼ìš°ë“œ ì„œë¹„ìŠ¤ ë„ì… ì§€ì›ì‚¬ì—… ì í•©ì„± í‰ê°€", file: "cloudvocher_selftest.html" },
                        { title: "ë°ì´í„° ë°”ìš°ì²˜ ìê°€ì§„ë‹¨", desc: "ë°ì´í„° í™œìš© ë° AI ë„ì… ì§€ì›ì‚¬ì—… ì§„ë‹¨", file: "data_voucher_diagnosis.html" }
                    ]
                },
                {
                    title: "ìˆ˜ì¶œì§€ì›",
                    tests: [
                        { title: "ìˆ˜ì¶œë°”ìš°ì²˜ ìê°€ì§„ë‹¨", desc: "ìˆ˜ì¶œì—­ëŸ‰ í‰ê°€ ë° ë°”ìš°ì²˜ ì‹ ì²­ ì í•©ì„± ì§„ë‹¨", file: "export_voucher_diagnosis.html" }
                    ]
                },
                {
                    title: "ì¬ì°½ì—…",
                    tests: [
                        { title: "í¬ë§ë¦¬í„´íŒ¨í‚¤ì§€ ìê°€ì§„ë‹¨", desc: "ì¬ì°½ì—… ì§€ì›ì‚¬ì—… ì í•©ì„± ì¢…í•© í‰ê°€", file: "hopereturn_salftest.html" }
                    ]
                },
                {
                    title: "ì œì¡°í˜ì‹ ",
                    tests: [
                        { title: "ìŠ¤ë§ˆíŠ¸ì œì¡°í˜ì‹  ìê°€ì§„ë‹¨", desc: "ì œì¡°í˜ì‹  ì—­ëŸ‰ ë° ì§€ì›ì‚¬ì—… ë§¤ì¹­ ì§„ë‹¨", file: "hyeokshin_voucher.html" }
                    ]
                },
                {
                    title: "ë§ˆì¼€íŒ…",
                    tests: [
                        { title: "ë§ˆì¼€íŒ… ë°”ìš°ì²˜ ìê°€ì§„ë‹¨", desc: "ë§ˆì¼€íŒ… ì—­ëŸ‰ ê°•í™” ì§€ì›ì‚¬ì—… ì í•©ì„± í‰ê°€", file: "markething_voucher.html" }
                    ]
                },
                {
                    title: "ì§€ì‹ì¬ì‚°",
                    tests: [
                        { title: "ì§€ì‹ì¬ì‚° ì§€ì›ì‚¬ì—… ìê°€ì§„ë‹¨", desc: "íŠ¹í—ˆÂ·ìƒí‘œ ë“± IP ì§€ì›ì‚¬ì—… ë§¤ì¹­ ì§„ë‹¨", file: "ip_support_voucher.html" }
                    ]
                },
                {
                    title: "R&D",
                    tests: [
                        { title: "R&D ì—­ëŸ‰ì§„ë‹¨", desc: "ì—°êµ¬ê°œë°œ ì—­ëŸ‰ ë° ì§€ì›ì‚¬ì—… ì í•©ì„± í‰ê°€", file: "ksic_research_diagnostic.html" }
                    ]
                },
                {
                    title: "ê²½ì˜ì „ëµ",
                    tests: [
                        { title: "ê¸°ì—…ì½”ë“œ ìê°€ì§„ë‹¨", desc: "ê¸°ì—… ê²½ì˜ì „í™˜ ì¤€ë¹„ë„ ì¢…í•© í‰ê°€", file: "cocdecselfrm.html" }
                    ]
                }
            ];

            let html = '';
            categories.forEach(cat => {
                html += `
                    <div class="category-section">
                        <h2 class="category-title">${cat.title}</h2>
                        <div class="cards-grid">
                `;
                
                cat.tests.forEach(test => {
                    html += `
                        <div class="card">
                            <span class="card-category">${cat.title}</span>
                            <h2 class="card-title">${test.title}</h2>
                            <p class="card-description">${test.desc}</p>
                            <div class="card-buttons">
                                <button class="btn btn-primary" onclick="startTest('${test.file}')">ì‹œì‘í•˜ê¸° â†’</button>
                                <button class="btn btn-secondary" onclick="copyLink('${test.file}')">ë§í¬ ë³µì‚¬</button>
                                <button class="btn btn-print" onclick="printTest('${test.file}')">ğŸ–¨ ì¸ì‡„</button>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('content').innerHTML = html;
        }

        // ì§„ë‹¨ ì‹œì‘
        function startTest(filename) {
            window.open(filename, '_blank');
        }

        // ë§í¬ ë³µì‚¬
        function copyLink(filename) {
            const baseUrl = window.location.href.split('/').slice(0, -1).join('/');
            const fullUrl = baseUrl + '/' + filename;
            
            navigator.clipboard.writeText(fullUrl).then(() => {
                alert('ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤');
            });
        }

        // ì¸ì‡„ ê¸°ëŠ¥
        function printTest(filename) {
            const printWindow = window.open(filename, '_blank');
            printWindow.onload = function() {
                printWindow.print();
            };
        }

        // ê´€ë¦¬ì íŒ¨ë„
        document.getElementById('adminBtn')?.addEventListener('click', function() {
            document.getElementById('adminPanel').classList.add('active');
            loadUserList();
        });

        document.getElementById('closeAdmin').addEventListener('click', function() {
            document.getElementById('adminPanel').classList.remove('active');
        });

        // ì‚¬ìš©ì ëª©ë¡ ë¡œë“œ
        function loadUserList() {
            const users = defaultUsers;
            const logs = getLoginLogs();
            let html = '';
            
            users.forEach((user, index) => {
                const log = logs[user.id];
                const loginCount = log ? log.count : 0;
                const lastLogin = log ? formatDate(log.lastLogin) : '-';
                
                html += `
                    <div class="user-item">
                        <div style="flex: 1;">
                            <div style="margin-bottom: 8px;">
                                <span class="user-item-info">${user.id}</span>
                                <span class="user-item-role">(${user.role === 'admin' ? 'ê´€ë¦¬ì' : 'ì‚¬ìš©ì'})</span>
                            </div>
                            <div style="font-size: 13px; color: #64748b;">
                                <span style="margin-right: 15px;">ì ‘ì† ${loginCount}íšŒ</span>
                                <span>ìµœì¢…: ${lastLogin}</span>
                            </div>
                        </div>
                        ${user.role !== 'admin' ? `<button class="btn-delete" onclick="deleteUser(${index})">ì‚­ì œ</button>` : ''}
                    </div>
                `;
            });
            
            document.getElementById('userList').innerHTML = html;
        }

        // ì‚¬ìš©ì ì‚­ì œ
        function deleteUser(index) {
            if (confirm('ì •ë§ ì´ ì‚¬ìš©ìë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                defaultUsers.splice(index, 1);
                localStorage.setItem('portalUsers', JSON.stringify(defaultUsers));
                loadUserList();
            }
        }

        // ì‚¬ìš©ì ì¶”ê°€
        document.getElementById('addUserBtn').addEventListener('click', function() {
            const newId = document.getElementById('newUserId').value.trim();
            const newPassword = document.getElementById('newUserPassword').value.trim();
            
            if (!newId || !newPassword) {
                alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }
            
            if (defaultUsers.find(u => u.id === newId)) {
                alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.');
                return;
            }
            
            defaultUsers.push({ id: newId, password: newPassword, role: "user" });
            localStorage.setItem('portalUsers', JSON.stringify(defaultUsers));
            
            document.getElementById('newUserId').value = '';
            document.getElementById('newUserPassword').value = '';
            
            loadUserList();
            alert('ì‚¬ìš©ìê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
        });

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì„¸ì…˜ ë³µì›
        window.addEventListener('load', function() {
            const savedUser = sessionStorage.getItem('currentUser');
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    showMainScreen();
                } catch (e) {
                    console.error('ì„¸ì…˜ ë³µì› ì˜¤ë¥˜:', e);
                }
            }
        });
    </script>
</body>
</html>
